<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>/home/amatter/amslib/database/Amslib_Database_MySQL.php</title><link rel="stylesheet" type="text/css" href="../../styles/main.css"><script language=JavaScript src="../../javascript/main.js"></script><script language=JavaScript src="../../javascript/prettify.js"></script><script language=JavaScript src="../../javascript/searchdata.js"></script></head><body class="ContentPage" onLoad="NDOnLoad();prettyPrint();"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version 1.52 -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org -->




<div id=Content><div class="CFile"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="Amslib_Database_MySQL.php"></a>Amslib_Database_MySQL.php</h1><div class=CBody><!--START_ND_SUMMARY--><div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable><tr class="SMain"><td class=SEntry><a href="#Amslib_Database_MySQL.php" >Amslib_Database_MySQL.php</a></td><td class=SDescription></td></tr><tr class="SGroup"><td class=SEntry><a href="#Functions" >Functions</a></td><td class=SDescription></td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#connect" id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">connect</a></td><td class=SDescription>Connect to the MYSQL database using various details</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#__construct" id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">__construct</a></td><td class=SDescription>This method is called when the database object is created, it connects to the database by default</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#getRealResultCount" id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">getRealResultCount</a></td><td class=SDescription>Obtain a real row count from the previous query, if you use limit and want to know how many a query WOULD return without the limit, you can use this method, but in the query, you need to put SQL_CALC_FOUND_ROWS as one of the selected fields</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#hasTable" id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">hasTable</a></td><td class=SDescription>Find out whether the connected mysql database has a table on the database given this is useful for determining whether a database can support certain functionality or not</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#disconnect" id=link5 onMouseOver="ShowTip(event, 'tt5', 'link5')" onMouseOut="HideTip('tt5')">disconnect</a></td><td class=SDescription>Disconnect from the Database</td></tr><tr class="SFunction SIndent1"><td class=SEntry><a href="#selectColumn" id=link6 onMouseOver="ShowTip(event, 'tt6', 'link6')" onMouseOut="HideTip('tt6')">selectColumn</a></td><td class=SDescription>Obtain a single column from the result of an SQL query, optionally optimised to a single value if there is only one result.</td></tr><tr class="SFunction SIndent1 SMarked"><td class=SEntry><a href="#selectRandom" id=link7 onMouseOver="ShowTip(event, 'tt7', 'link7')" onMouseOut="HideTip('tt7')">selectRandom</a></td><td class=SDescription>Select a number of random rows from a table</td></tr></table></div></div><!--END_ND_SUMMARY--></div></div></div>

<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Functions"></a>Functions</h3></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="connect"></a>connect</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">public function connect()</td></tr></table></blockquote><p>Connect to the MYSQL database using various details</p><h4 class=CHeading>todo</h4><ul><li>Need to move the database details to somewhere more secure (like inside the database!!&nbsp; ROFL!! joke, don&rsquo;t do that!!!!)</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="__construct"></a>__construct</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>public function __construct(</td><td class="PParameter  prettyprint " nowrap>$connect</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;=&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%>true</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>This method is called when the database object is created, it connects to the database by default</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="getRealResultCount"></a>getRealResultCount</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">public function getRealResultCount()</td></tr></table></blockquote><p>Obtain a real row count from the previous query, if you use limit and want to know how many a query WOULD return without the limit, you can use this method, but in the query, you need to put SQL_CALC_FOUND_ROWS as one of the selected fields</p><h4 class=CHeading>returns</h4><p>The number of results the previous query would have returned without the limit statement, if using SQL_CALC_FOUND_ROWS in the query</p><h4 class=CHeading>notes</h4><ul><li>this method uses the select result stack to store the previous query, which is assumed to be the query that generated the results, but you need the real result count before you process all the results, normally, calling this method would destroy the previous query and all your results with it.</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="hasTable"></a>hasTable</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>public function hasTable(</td><td class="PParameter  prettyprint " nowrap>$database,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>$table</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Find out whether the connected mysql database has a table on the database given this is useful for determining whether a database can support certain functionality or not</p><h4 class=CHeading>parameters</h4><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>$database</td><td class=CDLDescription>The database to check for the table</td></tr><tr><td class=CDLEntry>$table</td><td class=CDLDescription>The table to check for</td></tr></table><h4 class=CHeading>returns</h4><p>A boolean true or false result, depending on the existence of the table</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="disconnect"></a>disconnect</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">public function disconnect()</td></tr></table></blockquote><p>Disconnect from the Database</p></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="selectColumn"></a>selectColumn</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>public function selectColumn(</td><td class="PParameter  prettyprint " nowrap>$query,</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%></td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>$column</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;=&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%>false,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>$numResults</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;=&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%>0,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>$optimise</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;=&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%>false</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Obtain a single column from the result of an SQL query, optionally optimised to a single value if there is only one result.</p><h4 class=CHeading>operations</h4><ul><li>do the sql query</li><li>if the column parameter is a string, pluck that column from each result</li><li>if there is only one result and optimisation was requested, make the first array value as the return value</li><li>return the final value, either an array of values for that column, or a single variable containing the first value</li></ul></div></div></div>

<div class="CFunction"><div class=CTopic><h3 class=CTitle><a name="selectRandom"></a>selectRandom</h3><div class=CBody><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>public function selectRandom(</td><td class="PParameter  prettyprint " nowrap>$table,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>$pkName,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>$count</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote><p>Select a number of random rows from a table</p><p>I&rsquo;d like to thank Jay Paroline for this little snippet of SQL link: <a href="http://forums.mysql.com/read.php?132,185266,194715" class=LURL target=_top>http://forums.mysql.com<wbr>/read.php?132<wbr>,185266<wbr>,194715</a></p><p>NOTES: this apparently works nicely with large tables</p></div></div></div>

</div><!--Content-->


<div id=Footer><a href="http://www.naturaldocs.org">Generated by Natural Docs</a></div><!--Footer-->


<div id=Menu><div class=MEntry><div class=MFile><a href="../router/Amslib_Router-php.html">$domain</a></div></div><div class=MEntry><div class=MFile><a href="../Amslib-php.html">Amslib.php</a></div></div><div class=MEntry><div class=MFile><a href="../Amslib_Paypal-php.html">Amslib_Paypal.php</a></div></div><div class=MEntry><div class=MFile><a href="../translator/Amslib_Translator-php.html">Amslib_Translator</a></div></div><div class=MEntry><div class=MFile><a href="../Amslib_Validator-php.html">Amslib_Validator</a></div></div><div class=MEntry><div class=MFile><a href="Amslib_Database-php.html">database/<wbr>Amslib_Database.php</a></div></div><div class=MEntry><div class=MFile id=MSelected>database/<wbr>Amslib_Database_MySQL.php</div></div><div class=MEntry><div class=MFile><a href="../plugin/Amslib_Plugin_Application-php.html">execute</a></div></div><div class=MEntry><div class=MFile><a href="../router/Amslib_Router_Language-php.html">extract</a></div></div><div class=MEntry><div class=MFile><a href="../file/Amslib_File-php.html">listFiles</a></div></div><div class=MEntry><div class=MFile><a href="../translator/Amslib_Translator_XML-php.html">load</a></div></div><div class=MEntry><div class=MFile><a href="../mvc/Amslib_MVC-php.html">mvc/<wbr>Amslib_MVC.php</a></div></div><div class=MEntry><div class=MFile><a href="../Amslib_Array-php.html">remove</a></div></div><div class=MEntry><div class=MFile><a href="../templates/xml_translation/objects/XML_Translation-php.html">render</a></div></div><div class=MEntry><div class=MFile><a href="../templates/hello_world/objects/Hello_World-php.html">render</a></div></div><div class=MEntry><div class=MFile><a href="../javascript/Amslib_ScrollBar-js.html">scrollTo</a></div></div><div class=MEntry><div class=MGroup><a href="javascript:ToggleMenu('MGroupContent1')">Index</a><div class=MGroupContent id=MGroupContent1><div class=MEntry><div class=MIndex><a href="../../index/General.html">Everything</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/Classes.html">Classes</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/Files.html">Files</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/Functions.html">Functions</a></div></div><div class=MEntry><div class=MIndex><a href="../../index/Variables.html">Variables</a></div></div></div></div></div><script type="text/javascript"><!--
var searchPanel = new SearchPanel("searchPanel", "HTML", "../../search");
--></script><div id=MSearchPanel class=MSearchPanelInactive><input type=text id=MSearchField value=Search onFocus="searchPanel.OnSearchFieldFocus(true)" onBlur="searchPanel.OnSearchFieldFocus(false)" onKeyUp="searchPanel.OnSearchFieldChange()"><select id=MSearchType onFocus="searchPanel.OnSearchTypeFocus(true)" onBlur="searchPanel.OnSearchTypeFocus(false)" onChange="searchPanel.OnSearchTypeChange()"><option  id=MSearchEverything selected value="General">Everything</option><option value="Classes">Classes</option><option value="Files">Files</option><option value="Functions">Functions</option><option value="Variables">Variables</option></select></div></div><!--Menu-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">public function connect()</td></tr></table></blockquote>Connect to the MYSQL database using various details</div></div><div class=CToolTip id="tt2"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>public function __construct(</td><td class="PParameter  prettyprint " nowrap>$connect</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;=&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%>true</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>This method is called when the database object is created, it connects to the database by default</div></div><div class=CToolTip id="tt3"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">public function getRealResultCount()</td></tr></table></blockquote>Obtain a real row count from the previous query, if you use limit and want to know how many a query WOULD return without the limit, you can use this method, but in the query, you need to put SQL_CALC_FOUND_ROWS as one of the selected fields</div></div><div class=CToolTip id="tt4"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>public function hasTable(</td><td class="PParameter  prettyprint " nowrap>$database,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>$table</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Find out whether the connected mysql database has a table on the database given this is useful for determining whether a database can support certain functionality or not</div></div><div class=CToolTip id="tt5"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td class="prettyprint">public function disconnect()</td></tr></table></blockquote>Disconnect from the Database</div></div><div class=CToolTip id="tt6"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>public function selectColumn(</td><td class="PParameter  prettyprint " nowrap>$query,</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%></td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>$column</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;=&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%>false,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>$numResults</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;=&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%>0,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>$optimise</td><td class="PDefaultValuePrefix  prettyprint ">&nbsp;=&nbsp;</td><td class="PDefaultValue  prettyprint " width=100%>false</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Obtain a single column from the result of an SQL query, optionally optimised to a single value if there is only one result.</div></div><div class=CToolTip id="tt7"><div class=CFunction><blockquote><table border=0 cellspacing=0 cellpadding=0 class="Prototype"><tr><td><table border=0 cellspacing=0 cellpadding=0><tr><td class="PBeforeParameters  prettyprint "nowrap>public function selectRandom(</td><td class="PParameter  prettyprint " nowrap>$table,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>$pkName,</td></tr><tr><td></td><td class="PParameter  prettyprint " nowrap>$count</td><td class="PAfterParameters  prettyprint "nowrap>)</td></tr></table></td></tr></table></blockquote>Select a number of random rows from a table</div></div><!--END_ND_TOOLTIPS-->




<div id=MSearchResultsWindow><iframe src="" frameborder=0 name=MSearchResults id=MSearchResults></iframe><a href="javascript:searchPanel.CloseResultsWindow()" id=MSearchResultsWindowClose>Close</a></div>


<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>